<!DOCTYPE html>

<!-- Template for new pages. This was supposed to be a template that could be interacted with (to maximise compatibility and DRY)...
     Aimed to be as modular as possible (I'm doing my best)-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ateli-weird (Working title)</title>
    <link href="/main.css" rel="stylesheet" type="text/css" media="all"/>
    <script src="js/jquery-3.7.0.min.js"></script>
</head>
<body>
    <main>
        <h1 id="title">Ateli-weird</h1>
        <section id="left-panel">
            <div id="updates">
            </div>
            <nav>
            </nav>
        </section>
        <div id="main">
            <h2 id="main-title">Welcome</h2>
            <div id="statuscafe">
                <div id="statuscafe-username"></div>
                <div id="statuscafe-content"></div>
            </div>
            <script src="https://status.cafe/current-status.js?name=rhenn" defer></script>
            <p>Please pardon the dust while I'm putting stuff together!
                This site should be (relatively) mobile-friendly, but I haven't optimised it properly yet.</p>
            <hr>
            <div id="recent-panel">
                <div id="recent-art">
                    <h3>Newest Artwork</h3>
                    <script defer>
                        function rc(r){
                            if (r.status == 200){
                                return r.text();
                            } else {
                                console.log("Image loading failed :(");
                            }
                        }

                        function latest(data){
                            let img = JSON.parse(data)[0];
                            let el = document.createElement("img");
                            el.alt = img.name;
                            el.src = img.url;
                            el.classList.add("recent-image");
                            let link = document.createElement("a");
                            link.href = img.url;
                            link.target = "_blank";
                            link.appendChild(el);
                            document.getElementById("recent-art").appendChild(link);
                        }

                        fetch("json/gallery.json").then(rc).then(latest);
                    </script>
                    <p>potentially put other updates below?</p>
                </div>
                <div id="recent-other">
                    <h3>Placeholder</h3>
                    <p>Not sure what to put here yet. </p>
                    <p>Buttons | Link Socials? | ??</p>
                </div>
            </div>
            <h3>TODO:</h3>
            <ul>
                <li>This section</li>
                <li>move h1 to its own component</li>
                <li>book reviews page</li>
                <li>about</li>
                <li>CSS</li>
                <li>sitemap</li>
                <li> Writing/lore stuff
                    <ul>
                        <li>"blog" section?</li>
                        <li>Artifacts</li>
                        <li></li>
                    </ul>
                </li>
            </ul>
        </div>
        <footer></footer>
    </main>

    <!-- PAGE-INDEPENDENT LOADING GOES HERE!!-->
    <script >
        $(function(){
            $("#updates").load("components/updates.html");
            $("nav").load("components/nav.html");
            $("footer").load("components/footer.html");
        })
    </script>
</body>
</html>